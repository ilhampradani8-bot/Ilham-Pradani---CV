<!DOCTYPE html>
<html lang="id">
<head>
	<link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Aplikasi catatan harian simpel dan cepat.">
    <meta name="theme-color" content="#ffffff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Catatan Harian</title>
    
    <style>
        /* Reset CSS agar tampilan penuh dan rapi */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #ffffff;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            /* Mencegah efek tarik-turun (pull-to-refresh) khas browser */
            overscroll-behavior-y: none; 
        }

        /* Header atas */
        header {
            padding: 15px 20px;
            background: #ffffff;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* Supaya header tetap di atas keyboard */
            flex-shrink: 0; 
            z-index: 10;
        }

        h1 {
            margin: 0;
            font-size: 20px;
            font-weight: 700;
            color: #2c3e50;
        }

        /* Indikator status (Tersimpan/Mengetik) */
        #status {
            font-size: 12px;
            color: #27ae60;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #status.visible {
            opacity: 1;
        }

        /* Area Mengetik Utama */
        .editor-container {
            flex-grow: 1;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex-grow: 1;
            width: 100%;
            border: none;
            padding: 20px;
            font-size: 18px;
            line-height: 1.6;
            resize: none; /* Hilangkan penarik sudut */
            outline: none; /* Hilangkan garis biru saat diklik */
            background: #fafafa;
            color: #333;
        }

        textarea::placeholder {
            color: #ccc;
        }

        /* Tombol Mengambang (Floating Action Button) */
        .fab-clear {
            position: absolute;
            bottom: 25px;
            right: 25px;
            background-color: #ff4757;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            box-shadow: 0 4px 10px rgba(255, 71, 87, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: transform 0.1s;
        }

        .fab-clear:active {
            transform: scale(0.95);
        }

        /* Support Mode Gelap (Dark Mode) */
        @media (prefers-color-scheme: dark) {
            body { background-color: #121212; color: #e0e0e0; }
            header { background-color: #1e1e1e; border-bottom-color: #333; }
            h1 { color: #ffffff; }
            textarea { background-color: #121212; color: #e0e0e0; }
            textarea::placeholder { color: #555; }
            .fab-clear { background-color: #e84118; }
            /* Mengubah warna status bar browser di HP */
            meta[name="theme-color"] { content: #1e1e1e; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Catatan Saya</h1>
        <span id="status">Tersimpan ‚úî</span>
    </header>

    <div class="editor-container">
        <textarea id="noteArea" placeholder="Apa yang sedang kamu pikirkan hari ini? Ketik di sini, otomatis tersimpan..."></textarea>
        
        <!-- Tombol Hapus (Icon Sampah sederhana dengan CSS) -->
        <button class="fab-clear" onclick="hapusCatatan()" aria-label="Hapus Catatan">
            üóëÔ∏è
        </button>
    </div>

    <script>
        const note = document.getElementById('noteArea');
        const status = document.getElementById('status');

        // FUNGSI 1: Memuat data saat aplikasi dibuka
        window.onload = function() {
            const savedData = localStorage.getItem('catatan_user_v1');
            if (savedData) {
                note.value = savedData;
            }
        };

        // FUNGSI 2: Menyimpan otomatis saat mengetik
        note.addEventListener('input', function() {
            // Simpan ke memori HP
            localStorage.setItem('catatan_user_v1', note.value);
            
            // Tampilkan status "Tersimpan"
            status.classList.add('visible');
            
            // Sembunyikan status setelah 1.5 detik
            clearTimeout(window.saveTimer);
            window.saveTimer = setTimeout(() => {
                status.classList.remove('visible');
            }, 1500);
        });

        // FUNGSI 3: Hapus semua catatan
        function hapusCatatan() {
            // Konfirmasi agar tidak terhapus tidak sengaja
            if (confirm('Apakah kamu yakin ingin menghapus semua catatan?')) {
                localStorage.removeItem('catatan_user_v1');
                note.value = '';
                note.focus();
                alert('Catatan berhasil dihapus.');
            }
        }

        // FUNGSI TAMBAHAN: Mencegah data hilang jika tombol back dipencet tidak sengaja
        // (Opsional, tapi bagus untuk UX)
        window.addEventListener('beforeunload', function (e) {
            if (note.value.length > 10) {
               // Browser modern mungkin mengabaikan pesan custom, tapi tetap memicu dialog konfirmasi
               // e.preventDefault(); 
               // e.returnValue = '';
            }
        });
    </script>
</body>
</html>